# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the "main" branch
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:
# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  true-ish:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        x: [true]
        include:
          - x: true
            y: foo
          - x: true
            y: foo
          - x: 'true'
            y: foo
          - x: 1
            y: foo
          - x: "true"
            y: foo
    name: ${{ toJSON(matrix) }}
    steps:
      - name: Run a one-line script
        run: echo ${{ toJSON(matrix.x) }}
  exclude:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        x: [1, true, 'str', {"k": 'v'}, {"k": 'v2'}, {"k2": 'v'}]
        exclude:
          - x: {"k":'v'}
    steps:
      - name: Run a one-line script
        run: echo '${{ toJSON(matrix.x) }}'
      - if: matrix.x == {"k",'v'}
        run: echo foo
